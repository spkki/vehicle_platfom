{% extends "base.html" %} {% block content %}
<h2>
  Maintenance Logs for {{ vehicle.make }} {{ vehicle.model }} ({{
  vehicle.nickname }})
</h2>
<form method="GET" action="{{ url_for('maintenance_logs', vehicle_id=vehicle.id) }}">
    <label>Switch Vehicle:</label>
    <select onchange="location = '/vehicles/' + this.value + '/maintenance_logs'">
        {% for v in all_vehicles %}
            <option value="{{ v.id }}" {% if v.id == vehicle.id %}selected{% endif %}>
                {{ v.make }} {{ v.model }} ({{ v.registration }})
            </option>
        {% endfor %}
    </select>
</form>

{% if logs %}
<table>
  <tr>
    <th>Date</th>
    <th>Odometer</th>
    <th>Service Type</th>
    <th>Cost</th>
    <th>Notes</th>
  </tr>
  {% for log in logs %}
  <tr>
    <td>{{ log.date }}</td>
    <td>{{ log.odometer }}</td>
    <td>{{ log.service_type }}</td>
    <td>{{ log.cost }}</td>
    <td>{{ log.notes }}</td>
    <td>
        <form method="POST" action="{{ url_for('delete_maintenance', log_id=log.id) }}" style="display:inline;">
            <button type="submit" onclick="return confirm('Are you sure you want to delete this entry?');">Delete</button>
        </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
<p>No maintenance logs found.</p>
{% endif %} {% endblock %}
